- title: Introduction
  id: intro
  md_path: README.md
  html_path: '/'
  content:
    - source: content/intro.md
  children:
    - title: Installation
      content:
        - source: "## Installation"
        - source: ruby-lang.org/en/documentation/installation/index.md
          header_shift: 1
    - title: Other Implementations of Ruby
      id: implementations
      content:
        - source: ruby-lang.org/en/about/index.md
          sections: 'Other Implementations of Ruby'
          header_shift: -1
        - source: >
            > See "Installers" and "Managers" sections of the [previous chapter](intro/installation.md)
            about downloading and installing different versions and implementations of Ruby.
    - title: Interactive Console
      id: irb
      content:
        - source: lib/irb/IRB.md
          sections:
            - IRB
            - Usage
            - Session variables
          remove:
            - "## Usage"
            # "Use of irb is easy if you know Ruby." does not look friendly in book intro :)
            - "Use of irb is easy"
        - source: "> Another popular Ruby interactive console is [pry](http://pryrepl.org/)."
        - source: lib/irb/XMP.md
          ignore: true
    - title: Ruby in Twenty Minutes
      id: quickstart
      content:
        - source: '## Ruby in Twenty Minutes'
        - source: '### Step 1'
        - source: ruby-lang.org/en/documentation/quickstart/index.md
          replace:
            - from: '[so let’s go back to that.](2/)'
              to: 'so let’s go back to that.'
        - source: '### Step 2'
        - source: ruby-lang.org/en/documentation/quickstart/2/index.md
          replace:
            - from: '[Create an object.](../3/)'
              to: 'Create an object.'
        - source: '### Step 3'
        - source: ruby-lang.org/en/documentation/quickstart/3/index.md
          replace:
            - from: '[can take a deeper look at.](../4/)'
              to: 'can take a deeper look at.'
        - source: ruby-lang.org/en/documentation/quickstart/4/index.md
          remove:
            - "If so, please head on over"
            - "Or, if you’d really like to dig into a book"
- title: Language Structure
  id: language
  content:
    - source: content/language.md
    - source: "doc/syntax/miscellaneous.md"
      sections:
        - Ending an Expression
        - Indentation
        - "`defined?`"
        # TODO: continuing the expression on the next line
      header_shift: 1
    # Deprecated
    - source: core/Data.md
      ignore: true
    # Rewritten totally
    - source: doc/syntax.md
      ignore: true
  children:
    - title: Keywords
      content:
        - source: doc/keywords.md
          header_shift: 0
          replace:
            - from: "* `defined?`: Returns a string describing its argument.  See [miscellaneous\n    syntax](rdoc-ref:syntax/miscellaneous.rdoc)"
              to: "* `defined?`: Returns a string describing its argument.  See [defined?](language.md#defined)"
    - title: Literals
      content:
        - source: doc/syntax/literals.md
          insert:
            - after: "(There are also the constants"
              source: "See also [TrueClass, FalseClass, NilClass](builtin/types/atomic.md)."
            - after: "All these numbers have"
              source: "See also [number classes](builtin/types/numbers.md)."
            - after: "    puts(<<-ONE, <<-TWO)"
              source: "See also [String](builtin/types/symbol-string.md#string) class."
            - after: "When creating a Hash, there is"
              source: "See also [Symbol](builtin/types/symbol-string.md#symbol) class."
            - after: "This proc will add one"
              source: "See also [Proc](builtin/core/method-proc.md#proc) class."
            - after: "The indentation of the least-indented"
              macros: since(2.3)
          replace:
            - from: "See Array for the methods"
              to: "See [Array](builtin/types/array.md) for the methods"
            - from: "See Hash for the methods"
              to: "See [Hash](builtin/types/hash.md) for the methods"
            - from: "See the Range documentation"
              to: "See the [Range](builtin/types/range.md) documentation"
            - from: "See Regexp for a description of the syntax"
              to: "See [Regexp](builtin/types/regexp.md) for a description of the syntax"
    - title: Comments
      content:
        - source: doc/syntax/comments.md
        - source: content/language/_comments.md
    - title: Variables and Constants
      content:
        - source: '## Variables and Constants'
        - source: '### Local Variables'
        - source: doc/syntax/assignment.md
          sections:
            - Local Variable Names
            - Local Variable Scope
            - Local Variables and Methods
          remove: "## Local Variable Names"
        - source: doc/syntax/assignment.md
          sections:
            - Instance Variables
            - Class Variables
            - Global Variables
          header_shift: 1
        - source: content/language/constants.md
    - title: Assignment
      content:
        - source: doc/syntax/assignment.md
          sections:
            - Assignment
            - Abbreviated Assignment
            - Multiple Assignment
            - Array Decomposition
        # TODO: Assignment methods: here or in Methods (with link here)?..
        #       It is already in variables...
    - title: Control Expressions
      content:
        - source: doc/syntax/control_expressions.md
          remove:
            - "The `for` loop is similar"
            - "The `for` loop is rarely used"
          replace:
            - from: 'when 1, 2 then puts "a is one or two'
              to: 'when 1, 2 then puts "a is one or two"'
            - from: 'using the +===+ method which is aliased to +==+ on'
              to: 'using the `===` method which is aliased to `==` on'
            - from: "loop the condition `a >\n"
              to: "loop the condition `a > "
          insert:
            - after: "The result value of a `for`"
              source: content/syntax/control_expressions/_for_vs_each.md
            - after: "The result value of a `case`"
              source: content/syntax/control_expressions/_pattern_matching.md
    # TODO: This, and paragraph above, is copy-paste of my PR to Ruby: https://github.com/ruby/ruby/pull/2786/files
    # When it would be merged (or any other docs will emerge...), this should be updated.
    - title: Pattern matching
      content:
        - source: content/syntax/pattern_matching.md
          insert:
            - after: '# Pattern matching'
              macros: since(2.7)
    - title: Defining methods
      id: methods-def
      content:
        - source: doc/syntax/methods.md
          insert:
            - after: "When called, the arguments"
              source: "content/language/methods/_underscore.md"
            - after: "When mixing keyword arguments"
              source: "content/language/methods/_keyword_vars.md"
            - after: "If you wish to rescue an exception"
              source: "content/language/methods/_expression.md"
        - source: doc/syntax/miscellaneous.md
          sections:
            - "`alias`"
            - "`undef`"
        # TODO: Advanced methods: expressions & DSLs
    - title: Calling methods
      id: methods-call
      content:
        - source: doc/syntax/calling_methods.md
    - title: Modules and Classes
      content:
        - source: doc/syntax/modules_and_classes.md
          insert:
            - after: "The third visibility is `private`."
              source: "content/language/modules_and_classes/_visibility.md"
    - title: Exceptions
      content:
        - source: content/language/exceptions/_raise.md
        - source: doc/syntax/exceptions.md
    - title: Refinements
      content:
        - source: doc/syntax/refinements.md
    - title: Precedence
      content:
        - source: doc/syntax/precedence.md
    - title: Miscellaneous Syntax
      id: misc
      content:
        - source: doc/syntax/miscellaneous.md
          sections:
            - "`BEGIN` and `END`"
          header_shift: 0
    - title: File Structure
      id: files
      content:
        - source: content/language/files.md
    - title: Globals
      content:
        - source: doc/globals.md
          header_shift: 0
        - source: lib/English/English.md
          remove: "Include the English library"
          insert:
            - after: '# English'
              source: >
                `English` standard library provides longer, more readable names for predefined
                global variables.
    - title: Metaprogramming and DSL
      id: metaprogramming
      content:
        - source: content/language/metaprogramming.md
- title: Built-in Classes
  id: builtin
  content:
    - source: content/builtin.md
  children:
    - title: Language Core
      id: core
      content:
        - source: content/core/core.md
        # Deprecated/obsolete, see https://bugs.ruby-lang.org/issues/10548
        - source: core/Continuation.md
          ignore: true
      children:
        - title: Kernel
          content:
            - source: core/Kernel.md
            - source: "> See also [Appendix A](appendix-a.md) for a structured list of Kernel methods."
        - title: Object
          content:
            - source: '## BasicObject and Object'
            - source: core/BasicObject.md
            - source: core/Object.md
        - title: Module and Class
          content:
            - source: core/Module.md
            - source: core/Class.md
        - title: Method and Proc
          content:
            - source: core/Method.md
            - source: core/UnboundMethod.md
              header_shift: 2
            - source: core/Proc.md
        - title: Binding
          content:
            - source: core/Binding.md

    - title: Value Types
      id: types
      content:
        - source: content/core/types.md
      children:
        - title: "true, false, nil"
          id: atomic
          content:
            - source: "## `true`, `false` and `nil`"
            - source: core/TrueClass.md
            - source: core/FalseClass.md
            - source: core/NilClass.md
        - title: Comparable
          content:
            - source: core/Comparable.md
        - title: Numbers
          content:
            - source: core/Numeric.md
            - source: core/Integer.md
            - source: core/Float.md
            - source: core/Rational.md
            - source: core/Complex.md
            - source: '## BigDecimal'
            - source: ext/bigdecimal/BigDecimal.md
              sections:
                - Introduction
                - _ref
              remove: '## Introduction'
              process:
                - [stdlib, bigdecimal]
            # Internals of BigDecimal
            - source: ext/bigdecimal/BigMath.md
              ignore: true
            - source: ext/bigdecimal/Jacobian.md
              ignore: true
            - source: ext/bigdecimal/LUSolve.md
              ignore: true
            - source: ext/bigdecimal/Newton.md
              ignore: true
            - source: '## Number Utilities'
            - source: core/Math.md
              header_shift: 2
            - source: lib/prime/Prime.md
              header_shift: 2
              process:
                - [stdlib, prime]
            - source: core/Random.md
            - source: lib/securerandom/SecureRandom.md
              process:
                - [stdlib, securerandom]
              header_shift: 2
              remove:
                - "## Secure random number"
        - title: Symbol and String
          content:
            - source: '## Symbol and String'
            - source: core/Symbol.md
            - source: core/String.md
              replace:
                - from: "``!'' modify their receiver, while those without a ``!''"
                  to: "`!` modify their receiver, while those without a `!`"
            - source: core/Encoding.md
            # Nothing documented there
            - source: core/UnicodeNormalize.md
              ignore: true
        - title: Regexp
          id: regexp
          content:
            - source: core/Regexp.md
              replace:
                - from: "'.+' matches '<a><b>'; the second uses a lazy quantifier so '.+?' matches\n'<a>'"
                  to: "`'.+'` matches `'<a><b>'`; the second uses a lazy quantifier so `'.+?'` matches `'<a>'`"
            - source: core/MatchData.md
            # Just mentioning it here for validate_listing, but it is already included in Regexp docs by RDoc means
            - source: doc/regexp.md
              ignore: true
        - title: Range
          content:
            - source: core/Range.md
              insert:
                - after: '## Beginless/Endless Ranges'
                  macros: since(2.7, beginless)
                - after: '## Beginless/Endless Ranges'
                  macros: since(2.6, endless)
        - title: Struct
          content:
            - source: core/Struct.md
            - source: lib/ostruct/OpenStruct.md
              process:
                - [stdlib, ostruct]
        - title: Times and Dates
          content:
            - source: '## Times and Dates'
            - source: core/Time.md
              remove:
                - "# Examples"
                - "All of these examples"
              insert:
                - after: '## Timezone argument'
                  macros: since(2.6)
            # Really non-informative... Rewritten in content/
            - source: lib/time/Time.md
              ignore: true
            - source: content/builtin/core/time/_timerb.md
            - source: ext/date/Date.md
              sections:
                - Date
              process:
                - [stdlib, date]
            - source: ext/date/DateTime.md
              process:
                - [stdlib, date]
        - title: Enumerable
          content:
            - source: core/Enumerable.md
              insert:
                - source: content/core/enumerable.md
                  after: "The Enumerable mixin"
            - source: core/Enumerator.md
            - source: content/core/enumerator_lazy.md
            - source: core/Enumerator--Lazy.md
              sections:
                - _ref
            - source: core/Enumerator--ArithmeticSequence.md
              insert:
                - after: '# Enumerator::ArithmeticSequence'
                  macros: since(2.6)
            - source: core/Enumerator--Chain.md
              insert:
                - after: '# Enumerator::Chain'
                  macros: since(2.6)
            # Internal classes
            - source: core/Enumerator--Generator.md
              ignore: true
            - source: core/Enumerator--Yielder.md
              ignore: true
            - source: core/Enumerator--Producer.md
              ignore: true
        - title: Array
          content:
            - source: core/Array.md
        - title: Hash
          content:
            - source: core/Hash.md
        - title: Set
          content:
            - source: lib/set/Set.md
              remove:
                - '## Contact'
                - '    - Akinori'
              process:
                - [stdlib, set]
            - source: lib/set/SortedSet.md
        - title: Matrix
          content:
            - source: lib/matrix/Matrix.md
              process:
                - [stdlib, matrix]
            - source: lib/matrix/Vector.md
              sections:
                - Vector
                - _ref

    - title: Exception
      content:
        - source: core/Exception.md
      children:
        - title: Exception Classes
          content:
            - source: "## Built-in Exception Classes"
            # Order and depth here are corresponding to explanation in Exception class docs
            - source: core/NoMemoryError.md
            - source: core/ScriptError.md
            - source: core/LoadError.md
              header_shift: 2
            - source: core/NotImplementedError.md
              header_shift: 2
            - source: core/SyntaxError.md
              header_shift: 2
            - source: core/SecurityError.md
            - source: core/SignalException.md
            - source: core/Interrupt.md
              header_shift: 2
            - source: core/StandardError.md
            - source: core/ArgumentError.md
              header_shift: 2
            - source: core/UncaughtThrowError.md
              header_shift: 3
            - source: core/EncodingError.md
              header_shift: 2
            - source: core/FiberError.md
              header_shift: 2
            - source: core/IOError.md
              header_shift: 2
            - source: core/EOFError.md
              header_shift: 3
            - source: core/IndexError.md
              header_shift: 2
            - source: core/KeyError.md
              header_shift: 3
            - source: core/StopIteration.md
              header_shift: 3
            - source: core/ClosedQueueError.md
              header_shift: 4
            - source: core/LocalJumpError.md
              header_shift: 2
            - source: core/NameError.md
              header_shift: 2
            - source: core/NoMethodError.md
              header_shift: 3
            - source: core/RangeError.md
              header_shift: 2
            - source: core/FloatDomainError.md
              header_shift: 3
            - source: core/RegexpError.md
              header_shift: 2
            - source: core/RuntimeError.md
              header_shift: 2
            - source: core/FrozenError.md
              header_shift: 3
            - source: core/SystemCallError.md
              header_shift: 2
            - source: core/Errno.md
              header_shift: 3
            - source: core/ThreadError.md
              header_shift: 2
            - source: core/TypeError.md
              header_shift: 2
            - source: core/ZeroDivisionError.md
              header_shift: 2
            - source: core/SystemExit.md
            - source: core/SystemStackError.md
            - source: core/fatal.md
    - title: Warning
      content:
        - source: core/Warning.md
          insert:
            - after: '# Warning'
              macros: since(2.4)

    - title: System Programming and CLI
      id: system-cli
      content:
        - source: '## System Programming and Command Line'
      children:
        - title: Processes and Signals
          content:
            - source: core/Process.md
            - source: core/Signal.md
        - title: IO Basics
          id: io
          content:
            - source: core/IO.md
              remove_sections:
                - "io/console"
            # File is repeated here (as an object of IO) and in Filesystem section (as a module for
            # file manipulations).
            - source: core/File.md
            - source: ext/stringio/StringIO.md
              process:
                - [stdlib, stringio]
            # - source: core/IO--EAGAINWaitReadable.md
            # - source: core/IO--EAGAINWaitWritable.md
            # - source: core/IO--EINPROGRESSWaitReadable.md
            # - source: core/IO--EINPROGRESSWaitWritable.md
            # - source: core/IO--EWOULDBLOCKWaitReadable.md
            # - source: core/IO--EWOULDBLOCKWaitWritable.md
            # - source: core/IO--WaitReadable.md
            # - source: core/IO--WaitWritable.md
            - source: content/stdlib/io.md
        - title: Filesystem
          content:
            - source: core/Dir.md
              remove: "The directory used"
            - source: core/File.md
            - source: core/File--Constants.md
              remove: 'Document-module'
            - source: core/File--Stat.md
            - source: core/FileTest.md
            - source: ext/pathname/Pathname.md
              sections:
                - Pathname
                - "Example 1: Using Pathname"
                - _ref
              remove: "### Example 1"
              process:
                - [stdlib, pathname]
            - source: lib/tempfile/Tempfile.md
              sections:
                - Tempfile
                - Synopsis
                - _ref
              process:
                - [stdlib, tempfile]
              remove: "## Synopsis"
            - source: "### FileUtils"
              process:
                - [stdlib, fileutils]
            - source: lib/fileutils/FileUtils.md
              sections:
                - module FileUtils
                - Module Functions
                - _ref
              remove:
                - "## module FileUtils"
                - "### Module Functions"
            - source: lib/find/Find.md
              process:
                - [stdlib, find]
        - title: Arguments and Environment
          id: args
          content:
            - source: content/core/system-cli/args.md
            - source: core/ENV.md
              sections: _ref
            - source: core/ARGF.md

    - title: Concurrency and Parallelism
      content:
        - source: core/Thread.md
        - source: core/Fiber.md
        - source: core/ThreadGroup.md
        - source: core/Mutex.md
        - source: core/ConditionVariable.md
          header_shift: 2
        - source: core/Queue.md
        - source: core/SizedQueue.md
          header_shift: 2

    - title: Interpreter Internals
      id: internals
      content:
        - source: content/builtin/core/internals.md
        - source: core/ObjectSpace.md
        - source: >
            ### objspace standard library

            Standard library `objspace` provides some extensions for `ObjectSpace` module.
        - source: ext/objspace/ObjectSpace.md
          remove: "# ObjectSpace"
        - source: core/GC.md
        - source: core/TracePoint.md
          remove:
            - 'Document-class: TracePoint'
      children:
        - title: RubyVM
          content:
            - source: core/RubyVM.md
            - source: core/RubyVM--AbstractSyntaxTree.md
              insert:
                - after: '# RubyVM::AbstractSyntaxTree'
                  macros: since(2.6)
            - source: core/RubyVM--InstructionSequence.md
            - source: core/RubyVM--MJIT.md
    - title: Marshal
      content:
        - source: core/Marshal.md
        - source: doc/marshal.md

- title: Standard Library
  id: stdlib
  content:
    - source: content/stdlib.md
    - source: doc/standard_library.md
      ignore: true
  children:
    - title: Design Patterns
      id: patterns
      content:
        - source: "## Ruby implementation of common design patterns"
      children:
        - title: forwardable
          content:
            - source: lib/forwardable/Forwardable.md
              process: require_stdlib
            - source: lib/forwardable/SingleForwardable.md
        - title: delegate
          content:
            - source: lib/delegate/Delegator.md
              process: require_stdlib
            - source: lib/delegate/SimpleDelegator.md
        - title: observer
          content:
            - source: lib/observer/Observable.md
              process: require_stdlib
        - title: singleton
          content:
            - source: lib/singleton/Singleton.md
              process: require_stdlib
              remove_sections:
                - Implementation
                - Singleton and Marshal

    - title: Formats
      content:
        - source: "## Data Format Parsers and Renderers"
      children:
        - title: csv
          content:
            - source: lib/csv/CSV.md
              process: require_stdlib
              remove_sections:
                - CSV and Character Encodings (M17n or Multilingualization)
        - title: json
          content:
            - source: ext/json/JSON.md
              process: require_stdlib
              remove: "# JSON"
            - source: ext/json/Class.md
              ignore: true
        - title: yaml
          content:
            - source: lib/yaml/YAML.md
              process: require_stdlib
              remove_sections:
                - History
                - More info
              replace:
                - from: 'doc/security.rdoc'
                  to: '[Security](rdoc-ref:doc/security.rdoc) section'
            - source: ext/psych/Psych.md
              sections: _ref
        - title: "rexml: XML parser and generator"
          id: rexml
          content:
            - source: lib/rexml/REXML.md
              process: require_stdlib
        - title: rss
          content:
            - source: lib/rss/RSS.md
              process: require_stdlib
              remove_sections: Copyright
        - title: zlib
          content:
            - source: ext/zlib/Zlib.md
              process: require_stdlib
              remove_sections: Class tree

    - title: Development and Debugging
      id: development
      content:
        - source: "## Development and Debugging Tools"
      children:
        - title: benchmark
          content:
            - source: lib/benchmark/Benchmark.md
              process: require_stdlib
        - title: coverage
          content:
            - source: ext/coverage/Coverage.md
              process: require_stdlib
              remove:
                - "# Usage"
                - "# Example"
        - title: debug
          content:
            - source: '## debug'
            - source: lib/debug/DEBUGGER__.md
              remove: "# DEBUGGER"
              remove_sections:
                - Going beyond basics
                - Getting help
              replace:
                - from: "DEBUGGER__ Reference"
                  to: "debug Reference"
              header_shift: 1
            - source: content/stdlib/_debug_alt.md
        - title: "fiddle: FFI wrapper"
          id: fiddle
          content:
            - source: ext/fiddle/Fiddle.md
              process: require_stdlib
              remove:
                - 'A libffi wrapper'
                - '## Description'
        - title: logger
          content:
            - source: lib/logger/Logger.md
              process: require_stdlib
              remove: '## Description'
              remove_sections:
                - Features
                - HOWTOs
                - How to create a logger
                - How to log a message
                - How to close a logger
                - Setting severity threshold
              replace:
                - from: '#### Example'
                  to: '### Example'
        - title: "pp: Debug Print"
          id: pp
          content:
            - source: lib/pp/PP.md
              remove_sections:
                - Pretty-Print JSON
                - Author
              insert:
                - source: "> Since Ruby 2.5, this library is required by default"
                  after: "# PP"
              remove:
                # Lost in https://ruby-doc.org/, at least for Ruby 2.5.0
                # And anyways contained nothing useful.
                - "[PP Reference]"
            - source: lib/prettyprint/PrettyPrint.md
              sections: _ref
        - title: "ripper: Parsing Ruby"
          id: ripper
          content:
            - source: ext/ripper/Ripper.md
              process: require_stdlib
              remove_sections:
                - Resources
                - Requirements
                - License
            # Nothing useful there:
            - source: ext/ripper/DSL.md
              ignore: true
        - title: tracer
          content:
            - source: lib/tracer/Tracer.md
              remove_sections:
                - Copyright

    - title: String Utilities
      content:
        - source: "## String Utilities"
      children:
        - title: "erb: Ruby Templating"
          id: erb
          content:
            - source: "## ERB"
              process: [[require_stdlib, erb]]
            - source: lib/erb/ERB.md
              sections:
                - Introduction
                - Recognized Tags
                - Options
                - _ref
              remove: "## Introduction"
        - title: "racc: Parser Generator"
          id: racc
          content:
            - source: lib/racc/Racc.md
              process: require_stdlib
              replace:
                - from: "libdoc/racc/rdoc"
                  to: "libdoc/racc/parser/rdoc"
                - from: "rdoc-ref:lib/racc/rdoc/grammar.en.rdoc"
                  to: "https://ruby-doc.org/core-2.5.0/_lib/racc/rdoc/grammar_en_rdoc.html"
        - title: "shellwords: Shell-aware string manipulation"
          id: shellwords
          content:
            - source: lib/shellwords/Shellwords.md
              process: require_stdlib
              remove:
                - "## Manipulates strings like"
                - "The shellwords() function"
                - "### Usage"
              remove_sections:
                - Authors
                - Contact
                - Resources
        - title: "strscan: Sequental String Scanner"
          id: strscan
          content:
            - source: ext/strscan/StringScanner.md
              sections:
                - StringScanner
                - _ref
              process: require_stdlib
        - title: "did_you_mean: Typo suggestions"
          id: did_you_mean
          content:
            - source: lib/did_you_mean/DidYouMean.md
              process: require_stdlib
              remove:
                - "@example"

    - title: Networking and Web
      content:
        - source: "## Networking and Web Libraries"
        # Just generic utility classes for other libs
        - source: lib/net/protocol/Net--OpenTimeout.md
          ignore: true
        - source: lib/net/protocol/Net--ReadTimeout.md
          ignore: true
        - source: lib/net/protocol/Net--WriteAdapter.md
          ignore: true
        - source: lib/net/protocol/Net--WriteTimeout.md
          ignore: true
      children:
        - title: cgi
          content:
            - source: lib/cgi/CGI.md
              process: require_stdlib
              remove_sections:
                - Overview
              remove:
                - "## Introduction"
        - title: ipaddr
          content:
            - source: lib/ipaddr/IPAddr.md
              process: require_stdlib
              remove: '## Example'

        - title: net/ftp
          content:
            - source: lib/net/ftp/Net--FTP.md
              process: require_stdlib
              remove_sections:
                - Major Methods
                - Example
              remove:
                - "### Example 1"
              replace:
                - from: "### Example 2"
                  to: "Block form:"
        - title: net/http
          content:
            - source: lib/net/http/Net--HTTP.md
              process: require_stdlib
              remove_sections:
                - HTTP Request Classes
                - HTTP Response Classes
              remove:
                - "## An HTTP client API"
            # Make validate_listing happy... Honestly, it should've been nested under HTTP::
            - source: lib/net/http/Net--HTTPExceptions.md
              ignore: true
            - source: lib/net/http/Net--HTTPGenericRequest.md
              ignore: true
            - source: lib/net/http/Net--HTTPHeader.md
              ignore: true
            - source: lib/net/http/Net--HTTPInternalServerError.md
              ignore: true
            - source: lib/net/http/Net--HTTPMisdirectedRequest.md
              ignore: true
            - source: lib/net/http/Net--HTTPNotExtended.md
              ignore: true
            - source: lib/net/http/Net--HTTPRequest.md
              ignore: true
            - source: lib/net/http/Net--HTTPResponse.md
              ignore: true
            - source: lib/net/http/Net--HTTPTemporaryRedirect.md
              ignore: true
            - source: lib/net/http/Net--HTTPUnknownResponse.md
              ignore: true
            - source: lib/net/http/Net--HTTPUpgradeRequired.md
              ignore: true
        - title: net/imap
          content:
            - source: lib/net/imap/Net--IMAP.md
              process: require_stdlib
              remove_sections:
                - Errors
                - References
              replace:
                - from: "The protocol is described in [IMAP]."
                  to: ""
        - title: net/pop
          content:
            - source: lib/net/pop/Net--POP3.md
              process: require_stdlib
              remove:
                - "## What is This Library?"
            - source: lib/net/pop/Net--APOP.md
              sections: _ref
            # Honestly, why is not it nested deeper?...
            - source: lib/net/pop/Net--APOPSession.md
              ignore: true
            - source: lib/net/pop/Net--POPAuthenticationError.md
              ignore: true
            - source: lib/net/pop/Net--POPBadResponse.md
              ignore: true
            - source: lib/net/pop/Net--POPError.md
              ignore: true
            - source: lib/net/pop/Net--POPMail.md
              ignore: true
        - title: net/smtp
          content:
            - source: lib/net/smtp/Net--SMTP.md
              process: require_stdlib
              remove:
                - "## What is This Library?"
                - "## What is This Library NOT?"
            # Nest it into Net::SMPT, Y U NO???
            - source: lib/net/smtp/Net--SMTPAuthenticationError.md
              ignore: true
            - source: lib/net/smtp/Net--SMTPError.md
              ignore: true
            - source: lib/net/smtp/Net--SMTPFatalError.md
              ignore: true
            - source: lib/net/smtp/Net--SMTPServerBusy.md
              ignore: true
            - source: lib/net/smtp/Net--SMTPSyntaxError.md
              ignore: true
            - source: lib/net/smtp/Net--SMTPUnknownError.md
              ignore: true
            - source: lib/net/smtp/Net--SMTPUnsupportedCommand.md
              ignore: true

        - title: "openuri: Open Files and URLs"
          id: openuri
          content:
            - source: lib/open-uri/OpenURI.md
              process: require_stdlib
              remove:
                - "## Example"
                - "* Author:"
        - title: "resolv: DNS Resolver"
          id: resolv
          content:
            - source: lib/resolv/Resolv.md
              process: require_stdlib
              remove_sections: [Bugs]
            # Nothing there, in fact
            - source: ext/win32/Resolv.md
              ignore: true

        - title: socket
          content:
            - source: ext/socket/Socket.md
              process: require_stdlib
              remove_sections:
                - What's a socket?
                - Exception Handling
                - Convenience methods
                - Documentation by
            - source: ext/socket/BasicSocket.md
              ignore: true
            - source: ext/socket/IPSocket.md
              ignore: true
            - source: ext/socket/SOCKSSocket.md
              ignore: true
            - source: ext/socket/SocketError.md
              ignore: true
            - source: ext/socket/TCPServer.md
              ignore: true
            - source: ext/socket/TCPSocket.md
              ignore: true
            - source: ext/socket/UDPSocket.md
              ignore: true
            - source: ext/socket/UNIXServer.md
              ignore: true
            - source: ext/socket/UNIXSocket.md
              ignore: true
        - title: "webrick: Simple Web Server"
          id: webrick
          content:
            - source: lib/webrick/WEBrick.md
              sections:
                - "WEB server toolkit."
                - Starting an HTTP server
                - Custom Behavior
                - _ref
              process: require_stdlib
            - source: lib/webrick/Errno.md
              ignore: true
        - title: uri
          content:
            - source: lib/uri/URI.md
              process: require_stdlib
              remove_sections:
                - RFC References
                - Class tree
                - Copyright Info
              replace:
                # Continuation of inspect without comment sign, messes the highlighting
                # FIXME: Better do it in sanitizer...
                - from: "      URL:http://foo.com"
                  to: "#      URL:http://foo.com"
                - from: '     "LDAP"=>URI::LDAP'
                  to: '#     "LDAP"=>URI::LDAP'
                - from: '     "RSYNC"=>URI::RSYNC}'
                  to: '#     "RSYNC"=>URI::RSYNC}'

    - title: System Programming and CLI
      id: cli
      content:
        - source: "## Libraries for CLI and OS services access"
      children:
        - title: "etc: Access to Unix /etc"
          id: etc
          content:
            - source: ext/etc/Etc.md
              process: require_stdlib
        - title: "fcntl: POSIX file access constants"
          id: fcntl
          content:
            - source: ext/fcntl/Fcntl.md
              process: require_stdlib
        - title: "open3: Flexible child processes"
          id: open3
          content:
            - source: lib/open3/Open3.md
              process: require_stdlib
        - title: "optparse: CLI arguments parser"
          id: optparse
          content:
            - source: lib/optparse/OptionParser.md
              process: require_stdlib
              remove:
                - "## OptionParser"
                - "### Introduction"
              remove_sections:
                - Further documentation
                - Complete example
                - Shell Completion
        - title: "pty: Pseudo terminal"
          id: pty
          content:
            - source: ext/pty/PTY.md
              process: require_stdlib
              remove_sections:
                - License
            - source: ext/pty/IO.md
              ignore: true
        - title: readline
          content:
            - source: ext/readline/Readline.md
              process: require_stdlib
        - title: syslog
          content:
            - source: ext/syslog/Syslog.md
              process: require_stdlib
        - title: win32ole
          content:
            - source: ext/win32ole/WIN32OLE.md
              process: require_stdlib
            # Nesting into WIN32OLE module is overrated, right?...
            - source: ext/win32ole/IE_CONST.md
              ignore: true
            - source: ext/win32ole/IXMLDOMNode.md
              ignore: true
            - source: ext/win32ole/IXMLDOMParseError.md
              ignore: true
            - source: ext/win32ole/IXMLHttpRequest.md
              ignore: true
            - source: ext/win32ole/IXTLRuntime.md
              ignore: true
            - source: ext/win32ole/Microsoft_FreeThreadedXMLDOM_1_0.md
              ignore: true
            - source: ext/win32ole/Microsoft_XMLDOM_1_0.md
              ignore: true
            - source: ext/win32ole/Microsoft_XMLDSO_1_0.md
              ignore: true
            - source: ext/win32ole/Microsoft_XMLHTTP_1.md
              ignore: true
            - source: ext/win32ole/Msxml.md
              ignore: true
            - source: ext/win32ole/OLEProperty.md
              ignore: true
            - source: ext/win32ole/OLEtagDOMNodeType.md
              ignore: true
            - source: ext/win32ole/OLEtagXMLEMEM_TYPE.md
              ignore: true
            - source: ext/win32ole/WIN32OLERuntimeError.md
              ignore: true
            - source: ext/win32ole/WIN32OLE_EVENT.md
              ignore: true
            - source: ext/win32ole/WIN32OLE_METHOD.md
              ignore: true
            - source: ext/win32ole/WIN32OLE_PARAM.md
              ignore: true
            - source: ext/win32ole/WIN32OLE_RECORD.md
              ignore: true
            - source: ext/win32ole/WIN32OLE_TYPE.md
              ignore: true
            - source: ext/win32ole/WIN32OLE_TYPELIB.md
              ignore: true
            - source: ext/win32ole/WIN32OLE_VARIABLE.md
              ignore: true
            - source: ext/win32ole/WIN32OLE_VARIANT.md
              ignore: true

    - title: Cryptography and Encoding
      content:
        - source: '## Cryptography and Encoding Libraries'
      children:
        - title: base64
          content:
            - source: lib/base64/Base64.md
              process: require_stdlib
        - title: digest
          content:
            - source: ext/digest/Digest.md
              process: require_stdlib
        - title: openssl
          content:
            - source: ext/openssl/OpenSSL.md
              process: require_stdlib

    - title: Miscellaneous Libraries
      id: misc
      content:
        - source: "## Miscellaneous Ruby Libraries"
      children:
        # FIXME: If any of this used at all?..
        - title: Concurrency Utils
          content:
            - source: "## Concurrency Utils"
            # It is there, but it is not :)))
            - source: ext/monitor/Monitor.md
              ignore: true
            - source: lib/mutex_m/Mutex_m.md
        - title: "drb: Distributed Ruby"
          id: drb
          content:
            - source: lib/drb/DRb.md
              process: require_stdlib
              remove:
                - '## Overview'
            - source: lib/drb/ACL.md
              ignore: true
        - title: "dbm, gdbm, sdbm"
          id: dbm
          content:
            - source: '## DBM-alike Database Implementations'
            - source: ext/dbm/DBM.md
              remove: '## Introduction'
              remove_sections:
                - Cautions
                - Example
            - source: ext/dbm/DBMError.md
              ignore: true
            - source: '### GDBM'
            - source: ext/gdbm/GDBM.md
              sections:
                - Summary
                - _ref
              remove: '## Summary'
            - source: ext/sdbm/SDBM.md
              sections:
                - SDBM
                - _ref
            - source: ext/sdbm/SDBMError.md
              ignore: true
        - title: timeout
          content:
            - source: lib/timeout/Timeout.md
              process: require_stdlib
              remove:
                - "## Synopsis"
                - "## Description"
              remove_sections:
                - Copyright
        - title: Other Libraries
          id: other
          content:
            - source: "## A Brief List of Less Used Libraries"
            - source: lib/abbrev/Abbrev.md
            - source: lib/getoptlong/GetoptLong.md
            - source: ext/nkf/NKF.md
              sections:
                - NKF
                - _ref
            - source: ext/nkf/Kconv.md
              ignore: true

            - source: lib/pstore/PStore.md
              remove_sections:
                - "Usage example:"
                - Transaction modes
            - source: lib/rinda/Rinda.md
              remove_sections:
                - "Example(s)"
            - source: lib/tsort/TSort.md
              remove_sections:
                - A Simple Example
                - A More Realistic Example
                - Bugs
                - References
            - source: lib/weakref/WeakRef.md
            - source: ext/win32/Win32.md
              ignore: true

    - title: Bundled Gems
      id: bundled
      content:
        - source: content/stdlib/bundled.md
          header_shift: 0

- title: Developing in Ruby
  id: developing
  content:
    - source: >
        ## Developing in Ruby

        This chapter groups some tools and approaches of professional development, including using
        third-party libraries, documenting and testing code, code style and linting.
  children:
    - title: Libraries
      content:
        - source: "## Libraries"
        - source: ruby-lang.org/en/libraries/index.md
          header_shift: 0
          replace:
            - from: '[9]: http://bundler.io/'
              to: '[9]: developing/libraries/bundler.md'
        # Site covered it better
        - source: lib/rubygems/Gem.md
          ignore: true
        - source: lib/rubygems/Kernel.md
          ignore: true
        - source: lib/rubygems/TempIO.md
          ignore: true
      children:
        - title: "Bundler dependency manager"
          id: bundler
          content:
            - source: lib/bundler/Bundler.md
              insert:
                - after: '# Bundler'
                  source: >
                    > Bundler was de-facto Ruby's dependency manager for several years, but became
                    part of the standard library only at version 2.6. Before that, it should've been
                    installed separately.
                - after: '# Bundler'
                  macros: since(2.6)
            - source: lib/bundler/Error.md
              ignore: true
            - source: lib/bundler/UndefinedCommandError.md
              ignore: true
            - source: lib/bundler/UndefinedTaskError.md
              ignore: true
            - source: lib/bundler/InvocationError.md
              ignore: true

    - title: Mastering IRB
      id: irb
      content:
        - source: "## Mastering IRB"
        - source: lib/irb/IRB.md
          header_shift: 1
          remove_sections:
            - Usage
          remove:
            - "# IRB"
            - "IRB stands for"
            - "The `irb` command"
    - title: Documenting Ruby Code
      id: documenting
      content:
        - source: content/advanced/documenting.md
        # RDoc core class documentation is not the best entry point
        - source: lib/rdoc/RDoc.md
          ignore: true
        - source: lib/rdoc/RDocTask.md
          ignore: true

    - title: Testing Ruby Code
      id: testing
      content:
        - source: content/advanced/testing.md
    - title: Code Style
      content:
        - source: content/advanced/code_style.md
- title: Advanced Topics
  id: advanced
  content:
    - source: "## Advanced Topics"
  children:
    - title: Developing C Extensions
      id: extensions
      content:
        # TODO: In fact, it has a whole LOT of chapters! Should be either separated, or
        # shortened and linked to full version.
        - source: doc/extension.md
          remove:
            - "# extension.rdoc -"
            - "\\:enddoc"
        - source: lib/mkmf/MakeMakefile.md
    - title: Security
      content:
        - source: doc/security.md
    - title: DTrace
      content:
        - source: doc/dtrace_probes.md
    - title: Implementing Signal.trap callbacks
      id: signals
      content:
        - source: doc/signals.md
    - title: Contributing To Ruby
      id: contributing
      content:
        - source: doc/contributing.md
          replace:
            - from: "there is a [separate\nchannel](#label-Reporting+Security+Issues)"
              to: "there is a separate channel"
            - from: "[backported](#label-Backport+Requests)"
              to: "backported"
        - source: doc/contributors.md
          ignore: true
        - source: doc/maintainers.md
          ignore: true
        - source: doc/bug_triaging.md
          ignore: true
- title: "Appendix A: Kernel methods list"
  id: appendix-a
  content:
    - source: "## Appendix A: Kernel methods list"
    - source: _special/kernel.md
      header_shift: 1
      insert:
        - source: "* [gem](ref:rubygems/Kernel#gem) _(defined by RubyGems)_: Use `#gem` to activate a specific version of gem_name."
          after: "* [autoload]"
        - source: "* [pp](ref:rubygems/Kernel#pp) Pretty-printing (more detailed version of `p`)."
          after: "* [gets]"
- title: "Appendix B: Useful Links"
  id: appendix-b
  content:
    - source: content/appendixes/links.md
      header_shift: 0
